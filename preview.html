<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Script Deployment Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" rel="stylesheet" />
  <style>
    /* Print-specific styles */
    @media print {
      .page-break {
        page-break-before: always;
      }
      .no-break {
        page-break-inside: avoid;
      }
      .no-print {
        display: none !important;
      }
      .container {
        max-width: 100%;
        width: 100%;
        padding: 20px 40px;
      }
      .script-section, .script-header, .script-details, h4, h5, table, dl {
        break-inside: avoid;
      }
      body {
        font-size: 8px !important;
      }
      h1 { font-size: 20px !important; }
      h2 { font-size: 16px !important; }
      .section-title { font-size: 12px !important; }
      .subsection-title { font-size: 10px !important; }
      .table { font-size: 8px !important; }

      .centered-heading {
        /* Fill the full height of the page for vertical centering */
        height: 90vh;
        /* Flexbox centering */
        display: flex;
        align-items: center;
        justify-content: center;
        /* Increase font size for prominence */
        font-size: 26px !important;
        text-align: center;
        margin: 0;
        /* Remove background so it doesnâ€™t appear as a large block */
        background: none;
        /* Use a refined font for print */
        font-family: 'Georgia', serif;
        color: #01395A;
      }
    }



    /* Updated color scheme and clean layout */
    body {
      background: #fff;
      color: #01395A;
      font-family: "Times New Roman", Times, serif;
      line-height: 1.6;
      padding: 20px;
    }
    h1, h2 { color: red; }
    h3, h4, h5, .subsection-title { color: #01395A; }
    /* Initial Screen Styles */
    #initial-screen {
      margin: 50px auto;
      max-width: 800px;
      text-align: center;
    }
    .file-input-section {
      margin: 20px 0;
      padding: 40px;
      border: 2px dashed #ccc;
      border-radius: 8px;
      background: #f8f9fa;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .file-input-section:hover {
      border-color: #0d6efd;
      background: #f0f7ff;
    }
    #sectionsTable, #detailsTable {
      margin-top: 30px;
    }
    #docContent {
      display: none;
    }
    /* Header Section styling */
    .header-container {
      display: flex;
      align-items: center;
      margin-bottom: 2rem;
    }
    .logo-section {
      flex: 0 0 auto;
      margin-right: 20px;
    }
    .logo-section img { max-width: 150px; height: auto; }
    .cover-image { flex: 1; }
    .cover-image img {
      width: 100%;
      max-height: 300px;
      object-fit: cover;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.15);
    }
    .document-header {
      margin-bottom: 3rem;
      padding-top: 2rem;
    }
    .confidential-notice {
      font-style: italic;
      margin: 2rem 0;
      padding: 1rem;
      border: 1px solid #ddd;
      text-align: justify;
      background: #f8f9fa;
    }
    .section-title {
      font-size: 18px;
      font-weight: bold;
      text-transform: uppercase;
      margin: 2rem 0 1rem;
      padding: 0.5rem 0.75rem;
      color: #fff;
      background-color: #01395A;
    }
    .text-script { color: #01395A !important; }
    .subsection-title {
      font-size: 16px;
      font-weight: bold;
      margin: 1.5rem 0 1rem;
    }
    .table {
      margin-bottom: 2rem;
      background: #ffffff;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .table th {
      background-color: #16A089;
      color: #ffffff;
      border-bottom: 2px solid #0D695F;
    }
    .deployment-steps {
      padding-left: 1.2rem;
      margin-bottom: 2rem;
    }
    .script-details { margin-bottom: 2rem; }
    .info-box {
      background: #ffffff;
      border: 1px solid #dee2e6;
      border-radius: 4px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .bg-primary { background-color: #01395A !important; }
    .script-section h5 {
      color: #01395A;
      border-bottom: 2px solid #16A089;
      padding-bottom: 0.5rem;
      margin-bottom: 1rem;
    }
    .nowrap {
      white-space: nowrap;
    }
    /* New rule for preview images */
    .preview-image {
      max-width: 200px;
      max-height: 200px;
      border: 1px solid #ccc;
      margin: 5px;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- First Page: File Input and Section Selection -->
    <div id="initial-screen">
      <img src="https://appwrap.com/wp-content/uploads/2024/12/appwrap-logo.svg" alt="AppWrap Logo" class="img-fluid">
      <h1 class="mb-4">Script Deployment Document</h1>
      <div class="file-input-section" onclick="document.getElementById('jsonFileInput').click()">
        <p class="h5 mb-3">Click or drag and drop to load deployment manifest</p>
        <p class="text-muted mb-3">Select a JSON file to generate the formatted document</p>
        <input type="file" class="d-none" id="jsonFileInput" accept="application/json" />
        <button class="btn btn-primary">Select File</button>
      </div>
      <!-- Main Section Selection -->
      <h2>Main Sections to Include</h2>
      <table class="table table-bordered" id="sectionsTable">
        <thead>
          <tr>
            <th style="width:20%;">Include</th>
            <th>Section Name</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><input type="checkbox" id="section_header" checked /></td>
            <td>Step 1: Project Information (Header)</td>
          </tr>
          <tr>
            <td><input type="checkbox" id="section_toc" checked /></td>
            <td>Step 1: Table of Contents</td>
          </tr>
          <tr>
            <td><input type="checkbox" id="section_userStoriesFeatures" checked /></td>
            <td>Step 2: Project Scope (User Stories, Features, Usage)</td>
          </tr>
          <tr>
            <td><input type="checkbox" id="section_configuration" checked /></td>
            <td>Step 3/4: Playbook &amp; Configuration</td>
          </tr>
          <tr>
            <td><input type="checkbox" id="section_dependencies" checked /></td>
            <td>Step 5: Dependencies</td>
          </tr>
          <tr>
            <td><input type="checkbox" id="section_scriptDetails" checked /></td>
            <td>Step 6: Scripts</td>
          </tr>
          <tr>
            <td><input type="checkbox" id="section_customRecords" checked /></td>
            <td>Step 7: Custom Records</td>
          </tr>
          <tr>
            <td><input type="checkbox" id="section_workflows" checked /></td>
            <td>Step 8: Workflow</td>
          </tr>
          <tr>
            <td><input type="checkbox" id="section_customFields" checked /></td>
            <td>Step 9: Custom Fields</td>
          </tr>
          <tr>
            <td><input type="checkbox" id="section_savedSearches" checked /></td>
            <td>Step 9: Saved Searches</td>
          </tr>
          <tr>
            <td><input type="checkbox" id="section_templates" checked /></td>
            <td>Step 9: Templates</td>
          </tr>
          <tr>
            <td><input type="checkbox" id="section_troubleshooting" checked /></td>
            <td>Step 10: Troubleshooting</td>
          </tr>
          <tr>
            <td><input type="checkbox" id="section_checklist"  /></td>
            <td>Step 11: Deployment Checklist</td>
          </tr>
          <tr>
            <td><input type="checkbox" id="section_contacts" checked /></td>
            <td>Step 12: Contacts</td>
          </tr>
          <tr>
            <td><input type="checkbox" id="section_components" checked /></td>
            <td>Step 13: Components</td>
          </tr>
          <!-- NEW: License after components -->
          <tr>
            <td><input type="checkbox" id="section_license" checked /></td>
            <td>Step 14: License</td>
          </tr>
          <tr>
            <td><input type="checkbox" id="page_breaks" checked /></td>
            <td>Enable Page Breaks (if unchecked, sections will flow continuously)</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Document Content (Generated after JSON load) -->
    <div id="docContent"></div>
  </div>

  <!-- New Configuration Group Template -->
  <template id="configuration-group-template">
    <div class="configuration-group-block card mb-3">
      <div class="card-header">
        <input type="text" class="form-control border-0" name="configuration_group_name" data-field="configuration_group_name" placeholder="Configuration Group Name">
      </div>
      <div class="card-body">
        <textarea class="form-control mb-2" name="configuration_group_description" data-field="configuration_group_description" placeholder="Group Description" rows="2"></textarea>
        <!-- Table for configuration steps in this group -->
        <table class="table">
          <thead>
            <tr>
              <th>Step #</th>
              <th>Description</th>
              <th>Image</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody class="configuration-steps-body"></tbody>
        </table>
        <button type="button" class="btn btn-primary add-configuration-step">Add Configuration Step</button>
      </div>
    </div>
  </template>

  <!-- Updated Contact Section: Unified Contacts -->
  <section id="step-12" class="wizard-step" style="display: none;">
    <div class="section-header">
      <h4><i class="fas fa-address-card"></i> Contacts</h4>
    </div>
    <div class="mt-4" id="contacts-container">
      <!-- Contacts will be generated here by preview.js -->
    </div>
  </section>

  <!-- (Other step sections remain unchanged.) -->
  
  <!-- Bootstrap JS, jQuery -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Link to our separate preview.js -->
  <script src="preview.js"></script>
</body>
</html>
